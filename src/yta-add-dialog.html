<link rel="import" href="../bower_components/polymer/polymer.html">

<!-- <link rel="import" href="../bower_components/app-layout/app-layout.html"> # Lazy loaded -->

<!--<link rel="import" href="../bower_components/iron-resizable-behavior/iron-resizable-behavior.html">-->

<link rel="import" href="../bower_components/paper-button/paper-button.html">
<link rel="import" href="../bower_components/paper-dialog/paper-dialog.html">
<link rel="import" href="../bower_components/paper-dialog-scrollable/paper-dialog-scrollable.html">
<link rel="import" href="../bower_components/paper-material/paper-material.html">

<link rel="import" href="../bower_components/neon-animation/neon-animations.html"><!-- Pick only nescessary ones -->
<link rel="import" href="../bower_components/neon-animation/neon-shared-element-animatable-behavior.html">

<link rel="import" href="yta-common-styles.html">

<dom-module id="yta-add-dialog">
  <template>
    <style include="yta-common-styles">
      
      :host {
        @apply(--layout-horizontal);
        @apply(--layout-center);
        @apply(--layout-center-justified);
      }
      
      @media (min-width: 0px) and (max-width: 600px) and (orientation: portrait), (min-width: 480px) and (max-width: 960px) and (orientation: landscape) {
        
        
      /*
       * Phone styles
       */
        
        
        /*#dialog {
          @apply(--layout-fit);
          background-color: rgba(0,0,0,0) !important;
        }*/
        
      }
      
      @media (min-width: 0px) and (max-width: 600px) and (orientation: portrait) {
      
        
      /*
       * Phone portrait styles
       */
        
        app-toolbar {
          height: 56px !important;
        }
        
      }
      
      @media (min-width: 480px) and (max-width: 960px) and (orientation: landscape) {
        
      /*
       * Phone landscape styles
       */
        
        app-toolbar {
          height: 48px !important;
        }
        
      }
      
      #content {
        /*@apply(--layout-fit);*/
        background-color: white;
      }
      
      app-toolbar {
        background-color: var(--paper-yellow-500);
        color: rgba(0,0,0,0.87);
      }
      
    </style>
    
    <paper-dialog id="dialog" with-backdrop>
      <h2>Add to calendar</h2>
      <paper-dialog-scrollable>
         Lorem ipsum...
      </paper-dialog-scrollable>
      <div class="buttons">
        <paper-button dialog-dismiss>Discard</paper-button>
        <paper-button dialog-confirm>Save</paper-button>
      </div>
    </paper-dialog>
    
    <paper-dialog id="cancel">
      <p>Discard edits?</p>
      <div class="buttons">
        <paper-button dialog-dismiss>Discard</paper-button>
        <paper-button dialog-confirm>Keep editing</paper-button>
      </div>
    </paper-dialog>
  </template>
  
  <script>
    Polymer({
      is: 'yta-add-dialog',
      
      behaviors: [
        Polymer.NeonSharedElementAnimatableBehavior,
        Polymer.IronResizableBehavior
      ],
      
      properties: {
        
        phoneLayout: {
          type: Boolean,
          notify: true,
          observer: '_onPhoneLayoutChanges'
        },
        
        isActive: {
          type: Boolean,
          value: false
        }
        
        /*animationConfig: {
          value: function() { return {
            'entry': null,
            'exit': null
          } }
        },
        
        sharedElements: {
          value: function() { return {
            'hero': this.$.dialog
          } }
        }*/
        
      },
      
      listeners: {
        //'iron-resize': 'setLayout', // To set the layout when screen size changes
        'dialog.iron-overlay-canceled': '_onDialogCanceled'
      },
      
      attached: function() {
        addDialog = this;
        this.$.cancel.animationConfig = {
          'entry': [
            {
              name: 'slide-from-bottom-animation',
              node: this.$.cancel,
              timing: {
                duration: 225,
                easing: 'cubic-bezier(0.0, 0.0, 0.2, 1)'
              }
            },
            {
              name: 'fade-in-animation',
              node: this.$.cancel,
              timing: {
                duration: 225,
                easing: 'cubic-bezier(0.0, 0.0, 0.2, 1)'
              }
            }
          ],
          'exit': [
            {
              name: 'slide-down-animation',
              node: this.$.cancel,
              timing: {
                duration: 195,
                easing: 'cubic-bezier(0.4, 0.0, 1, 1)'
              }
            },
            {
              name: 'fade-out-animation',
              node: this.$.cancel,
              timing: {
                duration: 195,
                easing: 'cubic-bezier(0.4, 0.0, 1, 1)'
              }
            }
          ],
        };
      },
      
      _onDialogCanceled: function(e) {
        e.preventDefault();
        this.$.cancel.open();
        this.listen(this.$.cancel, 'iron-overlay-closed', '_onCancelClosed');
      },
      
      _onCancelClosed: function(e) {
        if(!e.detail.confirmed) {
          this.isActive = false;
          this.fire('switch-page', { action: 'closeAddDialog' });
        }
      },
      
      _onPhoneLayoutChanges: function(phoneLayout) {
        if(phoneLayout) {
          
        }
      }
    })
  </script>
</dom-module>