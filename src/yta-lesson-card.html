<dom-module id="app-lesson-card">
  <style>
  
    :host {
      --paper-item-body-secondary: {
        color: white;
        opacity: var(--light-secondary-opacity);
      };
      --paper-item-focused-before: {
        background: none;
      };
    }
    
    #titlePlaceholder.desktop {
      @apply(--layout-vertical);
      @apply(--layout-flex);
    }
    #base.desktop {
      padding: 16px;
      height: 143px;
      width: 143px;
    }
    #timesPlaceholder.desktop {
      @apply(--layout-vertical);
      @apply(--layout-end);
    }
    paper-item.desktop {
      @apply(--layout-flex);
    }
    
    #titlePlaceholder, #timesPlaceholder {
      @apply(--layout-horizontal);
    }
    
    .lesson-title:not(.desktop) {
      @apply(--layout-flex);
      @apply(--paper-font-title);
      color: white;
      vertical-align: top;
    }
    
    .test-indicator {
      @apply(--paper-font-caption);
      font-style: italic;
      color: white;
    }
    
    #base {
      padding: 0 0 0 32px;
      border-radius: 5px;
    }
    
    .time:not(.desktop) {
      @apply(--layout-flex);
    }
    
    .class {
      font-style: italic;
    }
  
  </style>
  
  <template>
    <paper-material elevation="0" id="base">
      <paper-item>
        <paper-item-body two-line>
          <div id="titlePlaceholder">
            <span class="lesson-title">{{item.value}}</span>
            <template is="dom-if" if="{{test}}">
              <span class="test-indicator">{{test}}</span>
            </template>
          </div>
          <div secondary id="timesPlaceholder">
            <span class="time">{{item.time}}</span>
            <template is="dom-if" if="{{item.class}}">
              <span class="class">{{item.class}}</span>
            </template>
          </div>
        </paper-item-body>
      </paper-item>
    </paper-material>
  </template>
  
  <script>
    Polymer({
      is: 'app-lesson-card',
      
      properties: {
        item: Object,
        index: Number,
        test: String,
        colors: Object,
        desktop: {
          type: Boolean,
          notify: true,
          observer: '_setLayout'
        }
      },
      
      ready: function(){
        var color = this.colors[this.item.value];
        this.$.base.style.backgroundColor = color;
      },
      
      _setLayout: function() {
        if(this.desktop) {
          this.$.base.classList.add('desktop');
          this.$.titlePlaceholder.classList.add('desktop');
          this.$.timesPlaceholder.classList.add('desktop')
        } else {
          this.$.base.classList.remove('desktop');
          this.$.titlePlaceholder.classList.remove('desktop');
          this.$.timesPlaceholder.classList.remove('desktop')
        }
      }
    })
  </script>
</dom-module>