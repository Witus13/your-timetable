<link rel="import" href="../bower_components/polymer/polymer.html">

<dom-module id="yta-firebase">
  <script>
    Polymer({
      is: 'yta-firebase',
      
      properties: {
        
        user: {
          type: Object,
          notify: true
        },
        
        data: {
          type: Object,
          notify: true
        },
        
        _firstLoadDone: {
          type: Boolean,
          value: false
        }
        
      },
      
      attached: function() {
        firebaseControl = this;
        worker = new Worker('src/yta-data-control.js');
        firebaseControl.fire('switch-page', { action: 'openOnboarding' }); // Open onboarding - for testing
      },
      
      signIn: function() {
        return new Promise(function(resolve, reject) {
          worker.postMessage('sign-in');
          worker.onmessage(function(e) {
            e.data.then(function(){ resolve() }).catch(function(err) {
              reject(Error(err))
            })
          })
        });
      },
      
      signOut: function() {
        //..
      }
    });
  </script>
</dom-module>-->